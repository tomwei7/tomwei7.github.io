+++
title = "Golangåˆ‡ç‰‡ä½¿ç”¨ä¸å†…éƒ¨å®ç°(ç¿»è¯‘)"
date = "2016-12-27"
categories = ["golang", "translate"]
tags = ["golang"]
description = "Golangçš„åˆ‡ç‰‡ç±»å‹æä¾›äº†ä¸€ç§ç®€å•é«˜æ•ˆçš„æ“ä½œåºåˆ—åŒ–ç±»å‹æ•°æ®çš„æ–¹å¼ã€‚åˆ‡ç‰‡å’Œå…¶ä»–è¯­è¨€ä¸­çš„æ•°ç»„ç±»ä¼¼ï¼Œä¸è¿‡å«æœ‰ä¸€äº›ç‰¹æ®Šçš„å±æ€§"
image = "golang-arrays-and-slices.png"
+++

Golangçš„åˆ‡ç‰‡ç±»å‹æä¾›äº†ä¸€ç§ç®€å•é«˜æ•ˆçš„æ“ä½œåºåˆ—åŒ–ç±»å‹æ•°æ®çš„æ–¹å¼ã€‚åˆ‡ç‰‡å’Œå…¶ä»–è¯­è¨€ä¸­çš„æ•°ç»„ç±»ä¼¼ï¼Œä¸è¿‡å«æœ‰ä¸€äº›ç‰¹æ®Šçš„å±æ€§ã€‚è¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯åˆ‡ç‰‡å’Œå¦‚ä½•ä½¿ç”¨åˆ‡ç‰‡
<!--more-->
### æ•°ç»„

åˆ‡ç‰‡ç±»å‹æ˜¯å»ºç«‹åœ¨æ•°ç»„ç±»å‹ä¸Šçš„æŠ½è±¡ï¼Œæ‰€ä»¥åœ¨æˆ‘ä»¬äº†è§£åˆ‡ç‰‡ä¹‹å‰æˆ‘ä»¬å¿…é¡»å…ˆäº†è§£æ•°ç»„ã€‚

æ•°ç»„ç±»å‹å®šä¹‰äº†ä¸€ç§ç‰¹å®šé•¿åº¦å’Œå…ƒç´ çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œ`[4]int `ä»£è¡¨äº†æœ‰å››ä¸ª`int`å…ƒç´ çš„æ•°ç»„ã€‚æ•°ç»„çš„å¤§å°æ˜¯å›ºå®šçš„ï¼›å®ƒçš„å¤§å°æ˜¯å®ƒç±»å‹çš„ä¸€éƒ¨åˆ†ï¼ˆ`[4]int`å’Œ`[5]int`æ˜¯ä¸åŒçš„ï¼Œä¸å…¼å®¹çš„ç±»å‹ï¼‰ã€‚æ•°ç»„å¯ä»¥ç›´æ¥å®šä½ï¼Œè¡¨è¾¾å¼`s[n]`å¯ä»¥ç›´æ¥è®¿é—®ç¬¬nä¸ªå…ƒç´ ï¼Œä»é›¶å¼€å§‹ã€‚

```go
var a [4]int
a[0] = 1
i := a[0]
// i == 1
```

æ•°ç»„ä¸éœ€è¦æ˜¾å¼çš„åˆå§‹åŒ–ï¼›ä¸€ä¸ªé›¶å€¼çš„æ•°ç»„å¯ä»¥è¢«ä½¿ç”¨ï¼Œæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ æ˜¯ä»–ä»¬è‡ªå·±æœ¬èº«çš„é›¶å€¼([golangé›¶å€¼å‚è€ƒè¿™é‡Œ](https://golang.org/ref/spec#The_zero_value))

```go
// a[2] == 0, the zero value of the int type
```

åœ¨å†…å­˜ä¸­ä»£è¡¨`[4]int`å°±æ˜¯4ä¸ªæ•´å½¢çš„å€¼é¡ºåºæ’åˆ—

![](go-slices-usage-and-internals_slice-array.png)

Golang ä¸­æ•°ç»„æ˜¯ä¸ªå€¼ã€‚æ•°ç»„çš„å˜é‡ä»£è¡¨ç€æ•´ä¸ªæ•°ç»„ï¼›è€Œä¸æ˜¯æŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼ˆè¿™ä¸ªå’ŒCè¯­è¨€ä¸­çš„æƒ…å†µä¸åŒï¼‰ã€‚è¿™ä»£è¡¨è¿™å½“ä½ åˆ†é…æˆ–è€…ä¼ é€’æ•°ç»„å˜é‡æ—¶å°†ä¼šæ‹·è´æ•´ä¸ªæ•°ç»„çš„å†…å®¹ã€‚ï¼ˆä¸ºäº†é¿å…å¤åˆ¶ä½ å¯ä»¥ä¼ é€’ä¸€ä¸ªæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼Œä¸è¿‡è¿™æ—¶è¿™å°±æ˜¯æ•°ç»„çš„æŒ‡é’ˆè€Œä¸æ˜¯æ•°ç»„äº†ã€‚ï¼‰ä½ å¯ä»¥æŠŠæ•°ç»„æƒ³æˆä¸€ç§ç»“æ„ä½“ä½†å…·æœ‰ç´¢å¼•è€Œä¸æ˜¯å‘½åå­—æ®µçš„å›ºå®šå¤§å°çš„å¤åˆå€¼ã€‚

ä¸€ä¸ªæ•°ç»„å¯ä»¥è¿™æ ·æŒ‡å®šï¼š

```go
b := [2]string{"Penn", "Teller"}
```

æˆ–è€…ï¼Œä½ å¯ä»¥è®©ç¼–è¯‘å™¨ä¸ºä½ è®¡ç®—æ•°ç»„å…ƒç´ ï¼š

```go
b := [...]string{"Penn", "Teller"}
```

åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œ`b`çš„ç±»å‹éƒ½æ˜¯`[2]string`

### åˆ‡ç‰‡

æ•°ç»„æœ‰å®ƒçš„ä½œç”¨ï¼Œä½†æ˜¯å®ƒä¸å¤Ÿçµæ´»ï¼Œæ‰€ä»¥ä½ ç»å¸¸åœ¨golang çš„ä»£ç ä¸­è§åˆ°å®ƒã€‚åˆ‡ç‰‡ï¼Œåˆ°å¤„éƒ½æœ‰ã€‚åˆ‡ç‰‡å»ºç«‹åœ¨æ•°ç»„çš„åŸºç¡€ä¸Šä¸”æ›´åŠ çš„å¼ºå¤§çµæ´»ã€‚

`[]T`æ˜¯åˆ‡ç‰‡ç±»å‹çš„å®šä¹‰ï¼Œå…¶ä¸­`T`æ˜¯åˆ‡ç‰‡ä¸­å…ƒç´ çš„ç±»å‹ï¼Œè·Ÿæ•°ç»„ä¸åŒï¼Œåˆ‡ç‰‡ç±»å‹æ²¡æœ‰é•¿åº¦ã€‚

å£°æ˜ä¸€ä¸ªåˆ‡ç‰‡å’Œå£°æ˜ä¸€ä¸ªæ•°ç»„æœ‰ç‚¹åƒï¼Œé™¤äº†ä¸éœ€è¦æŒ‡å®šå…ƒç´ ä¸ªæ•°

```go
letters := []string{"a", "b", "c", "d"}
```

ä¸€ä¸ªåˆ‡ç‰‡å¯ä»¥ç”±å†…ç½®çš„`make`å‡½æ•°åˆ›å»º

```go
func make([]T, len, cap) []T
```

å…¶ä¸­`T`ä»£è¡¨è¦åˆ›å»ºçš„åˆ‡ç‰‡å…¶ä¸­å…ƒç´ çš„ç±»å‹ï¼Œ`make`å‡½æ•°æ¥å—ç±»å‹ã€é•¿åº¦å’Œå®¹é‡é€‰é¡¹ã€‚è°ƒç”¨æ—¶ï¼Œ`make`åˆ†é…ä¸€ä¸ªæ•°ç»„å’Œè¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥æ•°ç»„çš„åˆ‡ç‰‡

```go
var s []byte
s = make([]byte, 5, 5)
// s == []byte{0, 0, 0, 0, 0}
```

å½“å®¹é‡å‚æ•°çœç•¥æ—¶ï¼Œé»˜è®¤å€¼ç­‰äºæŒ‡å®šçš„é•¿åº¦ã€‚è¿™ä¸ªæœ‰ä¸ªæ›´åŠ ç®€æ´ç‰ˆæœ¬çš„ä»£ç ï¼š

```go
s := make([]byte, 5)
```

å¯ä»¥ä½¿ç”¨å†…ç½®çš„`len`å’Œ`cap`è·å–åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡

```go
len(s) == 5
cap(s) == 5
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹åˆ‡ç‰‡é•¿åº¦ä¸å®¹é‡ç›´æ¥çš„å…³ç³»

é›¶å€¼çš„åˆ‡ç‰‡æ˜¯`nil`ã€‚`nil`çš„åˆ‡ç‰‡`len`å’Œ`cap`å‡½æ•°éƒ½ä¼šè¿”å›0ã€‚

è¿˜å¯ä»¥é€šè¿‡åˆ‡ç‰‡ç°æœ‰çš„åˆ‡ç‰‡æˆ–è€…æ•°ç»„æ¥ç”Ÿæˆåˆ‡ç‰‡ã€‚åˆ‡ç‰‡é€šè¿‡æŒ‡å®šå…·æœ‰ä¸¤ä¸ªç”¨å†’å·åˆ†éš”çš„ç´¢å¼•çš„åŠå¼€èŒƒå›´æ¥å®Œæˆã€‚æ¯”å¦‚ï¼Œè¡¨è¾¾å¼`b[1:4]`åˆ›å»ºäº†ä¸€ä¸ªåˆ‡ç‰‡åŒ…å«äº†`b`ä¸­1åˆ°3çš„å…ƒç´ ï¼ˆå¾—å¸¦çš„åˆ‡ç‰‡çš„ç´¢å¼•æ˜¯0åˆ°2ï¼‰ã€‚

```go
b := []byte{'g', 'o', 'l', 'a', 'n', 'g'}
// b[1:4] == []byte{'o', 'l', 'a'}, sharing the same storage as b
```

åˆ‡ç‰‡è¡¨è¾¾å¼çš„å¼€å§‹å’Œç»“æŸç´¢å¼•æ˜¯å¯é€‰çš„;å®ƒä»¬åˆ†åˆ«é»˜è®¤ä¸ºé›¶å’Œåˆ‡ç‰‡çš„é•¿åº¦ï¼š

```go
// b[:2] == []byte{'g', 'o'}
// b[2:] == []byte{'l', 'a', 'n', 'g'}
// b[:] == b
```

é€šè¿‡æ•°ç»„åˆ›å»ºåˆ‡ç‰‡çš„è¯­æ³•ä¹Ÿä¸€æ ·ï¼š

```go
x := [3]string{"Ğ›Ğ°Ğ¹ĞºĞ°", "Ğ‘ĞµĞ»ĞºĞ°", "Ğ¡Ñ‚Ñ€ĞµĞ»ĞºĞ°"}
s := x[:] // a slice referencing the storage of x
```

### åˆ‡ç‰‡å†…éƒ¨

åˆ‡ç‰‡æ˜¯æ•°ç»„æ®µçš„æè¿°ç¬¦ã€‚å®ƒç”±æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼Œæ®µçš„é•¿åº¦åŠå…¶å®¹é‡ï¼ˆæ®µçš„æœ€å¤§é•¿åº¦ï¼‰ç»„æˆã€‚

![](go-slices-usage-and-internals_slice-struct.png)

æˆ‘ä»¬å…ˆå‰ç”±`make([]byte,5)`åˆ›å»ºçš„å˜é‡`s`çš„ç»“æ„å¦‚ä¸‹ï¼š

![](go-slices-usage-and-internals_slice-1.png)

é•¿åº¦æ˜¯åˆ‡ç‰‡å¼•ç”¨çš„å…ƒç´ çš„æ•°é‡ã€‚å®¹é‡æ˜¯åº•å±‚æ•°ç»„ä¸­å…ƒç´ çš„æ•°é‡ï¼ˆä»sliceæŒ‡é’ˆå¼•ç”¨çš„å…ƒç´ å¼€å§‹ï¼‰ã€‚å°†é€šè¿‡ä¸‹é¢å‡ ä¸ªå°ä¾‹å­ï¼Œå°†å¸®åŠ©ä½ ç†è§£é•¿åº¦å’Œå®¹é‡ä¹‹é—´çš„åŒºåˆ«ã€‚

åœ¨æˆ‘ä»¬åˆ‡ç‰‡æ—¶ï¼Œè§‚å¯Ÿåˆ‡ç‰‡æ•°æ®ç»“æ„ä¸­çš„å˜åŒ–åŠå…¶ä¸åŸºç¡€æ•°ç»„çš„å…³ç³»ï¼š

```go
s = s[2:4]
```

!()[https://blog.golang.org/go-slices-usage-and-internals_slice-2.png]

åˆ‡ç‰‡æ“ä½œä¸ä¼šæ‹·è´å·²æœ‰çš„åˆ‡ç‰‡æ•°æ®ï¼Œå°†åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ‡ç‰‡æŒ‡å‘åŸæ¥çš„æ•°ç»„ã€‚è¿™ä½¿å¾—åˆ‡ç‰‡æ“ä½œä¸æ“ä½œæ•°ç»„ç´¢å¼•ä¸€æ ·é«˜æ•ˆã€‚å› æ­¤ï¼Œä¿®æ”¹é‡æ–°åˆ‡ç‰‡çš„å…ƒç´ ï¼ˆè€Œä¸æ˜¯åˆ‡ç‰‡æœ¬èº«ï¼‰å°†ä¿®æ”¹åŸå§‹åˆ‡ç‰‡çš„å…ƒç´ ï¼š

```go
d := []byte{'r', 'o', 'a', 'd'}
e := d[2:]
// e == []byte{'a', 'd'}
e[1] = 'm'
// e == []byte{'a', 'm'}
// d == []byte{'r', 'o', 'a', 'm'}
```

ä¹‹å‰æˆ‘ä»¬æŠŠ`s`åˆ‡ç‰‡æˆé•¿åº¦æ¯”å®¹é‡å°‘çš„åˆ‡ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é‡æ–°åˆ‡ç‰‡å°†å®ƒé•¿åº¦å¢é•¿å’Œå®¹é‡ä¸€æ ·å¤§(æˆ‘ä¹‹å‰è¿˜çœŸä¸çŸ¥é“èƒ½è¿™ä¹ˆç©ğŸ˜‚)ï¼š

```go
s = s[:cap(s)]
```

åˆ‡ç‰‡ä¸èƒ½è¶…è¶Šå…¶å®¹é‡ã€‚å°è¯•è¿™æ ·åšä¼šå¯¼è‡´è¿è¡Œæ—¶panicï¼Œå°±åƒåœ¨åˆ‡ç‰‡æˆ–æ•°ç»„çš„è¾¹ç•Œå¤–å»ºç«‹ç´¢å¼•ä¸€æ ·ã€‚ç±»ä¼¼åœ°ï¼Œåˆ‡ç‰‡ä¸èƒ½åœ¨é›¶ä»¥ä¸‹é‡æ–°åˆ‡ç‰‡ä»¥è®¿é—®æ•°ç»„ä¸­çš„æ—©æœŸå…ƒç´ ã€‚

### åˆ‡ç‰‡å¢é•¿ï¼ˆæ‹·è´å’Œappendå‡½æ•°ï¼‰

ä¸ºäº†å¢åŠ åˆ‡ç‰‡çš„å®¹é‡ï¼Œå¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°çš„è¾ƒå¤§åˆ‡ç‰‡ï¼Œå¹¶å°†åŸå§‹åˆ‡ç‰‡çš„å†…å®¹å¤åˆ¶åˆ°å…¶ä¸­ã€‚è¿™ç§æŠ€æœ¯å°±æ˜¯å…¶ä»–è¯­è¨€çš„åŠ¨æ€æ•°ç»„çš„èƒŒåå®ç°ã€‚ä¸‹ä¸€ä¸ªä¾‹å­é€šè¿‡åˆ¶ä½œä¸€ä¸ªæ–°çš„åˆ‡ç‰‡`t`ï¼Œå°†`s`çš„å†…å®¹å¤åˆ¶åˆ°`t`ï¼Œç„¶åå°†åˆ‡ç‰‡å€¼`t`åˆ†é…ç»™`s`æ¥ä½¿`s`çš„å®¹é‡åŠ å€ï¼š

```go
t := make([]byte, len(s), (cap(s)+1)*2) // +1 in case cap(s) == 0
for i := range s {
        t[i] = s[i]
}
s = t
```

é€šè¿‡å†…ç½®çš„`copy`å‡½æ•°å¯ä»¥æ›´åŠ å®¹æ˜“çš„å®ç°è¿™ç§å¾ªç¯æ“ä½œã€‚é¡¾åæ€ä¹‰ï¼Œå¤åˆ¶å°†æ•°æ®ä»æºåˆ‡ç‰‡å¤åˆ¶åˆ°ç›®æ ‡åˆ‡ç‰‡ã€‚å®ƒè¿”å›å¤åˆ¶çš„å…ƒç´ æ•°ã€‚

å¤åˆ¶åŠŸèƒ½æ”¯æŒåœ¨ä¸åŒé•¿åº¦çš„åˆ‡ç‰‡ä¹‹é—´è¿›è¡Œå¤åˆ¶ï¼ˆå®ƒåªä¼šå¤åˆ¶åˆ°è¾ƒå°‘æ•°é‡çš„å…ƒç´ ï¼‰ã€‚æ­¤å¤–ï¼Œå‰¯æœ¬å¯ä»¥å¤„ç†å…±äº«ç›¸åŒåº•å±‚æ•°ç»„çš„æºå’Œç›®æ ‡sliceï¼Œæ­£ç¡®å¤„ç†é‡å sliceã€‚

ä½¿ç”¨copyï¼Œæˆ‘ä»¬å¯ä»¥ç®€åŒ–ä¸Šé¢çš„ä»£ç ç‰‡æ®µï¼š

```go
t := make([]byte, len(s), (cap(s)+1)*2)
copy(t, s)
s = t
```
å¸¸è§çš„æ“ä½œæ˜¯å°†æ•°æ®é™„åŠ åˆ°åˆ‡ç‰‡çš„æœ«å°¾ã€‚æ­¤å‡½æ•°å°†å­—èŠ‚å…ƒç´ é™„åŠ åˆ°å­—èŠ‚ç‰‡ï¼Œå¦‚æœå¿…è¦ï¼Œå¢é•¿åˆ‡ç‰‡ï¼Œå¹¶è¿”å›æ–°çš„åˆ‡ç‰‡ï¼š

```go
func AppendByte(slice []byte, data ...byte) []byte {
    m := len(slice)
    n := m + len(data)
    if n > cap(slice) { // if necessary, reallocate
        // allocate double what's needed, for future growth.
        newSlice := make([]byte, (n+1)*2)
        copy(newSlice, slice)
        slice = newSlice
    }
    slice = slice[0:n]
    copy(slice[m:n], data)
    return slice
}
```

å¯ä»¥ä½¿ç”¨AppendByteè¿™æ ·ï¼š

```go
p := []byte{2, 3, 5}
p = AppendByte(p, 7, 11, 13)
// p == []byte{2, 3, 5, 7, 11, 13}
```

åƒAppendByteè¿™æ ·çš„å‡½æ•°å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬æä¾›å¯¹åˆ‡ç‰‡ç”Ÿé•¿æ–¹å¼çš„å®Œå…¨æ§åˆ¶ã€‚æ ¹æ®ç¨‹åºçš„ç‰¹æ€§ï¼Œå¯èƒ½éœ€è¦åˆ†é…æ›´å°æˆ–æ›´å¤§çš„å—ï¼Œæˆ–è€…å¯¹é‡æ–°åˆ†é…çš„å¤§å°è®¾ç½®ä¸Šé™ã€‚

ä½†æ˜¯å¤§å¤šæ•°ç¨‹åºä¸éœ€è¦å®Œå…¨æ§åˆ¶ï¼Œæ‰€ä»¥Goæä¾›äº†ä¸€ä¸ªå†…ç½®çš„`append`å‡½æ•°ï¼Œé€‚åˆå¤§å¤šæ•°ç”¨é€”; å‡½æ•°å£°æ˜ï¼š

```go
func append(s []T, x ...T) []T
```

`append`å‡½æ•°å°†å…ƒç´ xé™„åŠ åˆ°åˆ‡ç‰‡çš„æœ«å°¾ï¼Œå¦‚æœéœ€è¦æ›´å¤§çš„å®¹é‡ï¼Œåˆ™å¢é•¿åˆ‡ç‰‡ã€‚

```go
a := make([]int, 1)
// a == []int{0}
a = append(a, 1, 2, 3)
// a == []int{0, 1, 2, 3}
```

è¦å°†ä¸€ä¸ªåˆ‡ç‰‡é™„åŠ åˆ°å¦ä¸€ä¸ªåˆ‡ç‰‡ï¼Œè¯·ä½¿ç”¨...å°†ç¬¬äºŒä¸ªå‚æ•°å±•å¼€ä¸ºå‚æ•°åˆ—è¡¨ã€‚

```go
a := []string{"John", "Paul"}
b := []string{"George", "Ringo", "Pete"}
a = append(a, b...) // equivalent to "append(a, b[0], b[1], b[2])"
// a == []string{"John", "Paul", "George", "Ringo", "Pete"}
```

ç”±äºåˆ‡ç‰‡çš„é›¶å€¼ï¼ˆnilï¼‰çš„è¡Œä¸ºç±»ä¼¼äºé›¶é•¿åº¦åˆ‡ç‰‡ï¼Œå› æ­¤ä½ å¯ä»¥å£°æ˜åˆ‡ç‰‡å˜é‡ï¼Œç„¶ååœ¨å¾ªç¯ä¸­é™„åŠ åˆ‡ç‰‡å˜é‡ï¼š

```go
// Filter returns a new slice holding only
// the elements of s that satisfy f()
func Filter(s []int, fn func(int) bool) []int {
    var p []int // == nil
    for _, v := range s {
        if fn(v) {
            p = append(p, v)
        }
    }
    return p
}
```

### ä¸€ä¸ªå°é—®é¢˜

å¦‚å‰æ‰€è¿°ï¼Œé‡æ–°åˆ‡ç‰‡åˆ‡ç‰‡ä¸ä¼šç”Ÿæˆåº•å±‚æ•°ç»„çš„å‰¯æœ¬ã€‚å®Œæ•´æ•°ç»„å°†ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°å®ƒä¸å†è¢«å¼•ç”¨ã€‚æœ‰æ—¶å¯èƒ½å¯¼è‡´åªéœ€è¦æ•°ç»„ä¸­ä¸€ç‚¹ç‚¹å†…å®¹ï¼Œä½†æ˜¯æ•´ä¸ªæ•°ç»„éƒ½è¢«ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚
ä¾‹å¦‚ï¼Œæ­¤FindDigitså‡½æ•°å°†æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶æœç´¢ç¬¬ä¸€ç»„è¿ç»­æ•°å­—ï¼Œå°†å…¶ä½œä¸ºæ–°åˆ‡ç‰‡è¿”å›ã€‚

```go
var digitRegexp = regexp.MustCompile("[0-9]+")

func FindDigits(filename string) []byte {
    b, _ := ioutil.ReadFile(filename)
    return digitRegexp.Find(b)
}
```

æ­¤ä»£ç çš„è¡Œä¸ºä¸æœŸæœ›ä¸€æ ·ï¼Œä½†è¿”å›çš„`[]byte`æŒ‡å‘åŒ…å«æ•´ä¸ªæ–‡ä»¶çš„æ•°ç»„ã€‚å› ä¸ºåˆ‡ç‰‡å¼•ç”¨åŸå§‹æ•°ç»„ï¼Œåªè¦åˆ‡ç‰‡è¢«ä¿ç•™,åƒåœ¾æ”¶é›†å™¨å°±ä¸èƒ½é‡Šæ”¾æ•°ç»„ï¼›æ–‡ä»¶çš„æ•´ä¸ªå†…å®¹ä¿å­˜åœ¨å†…å­˜ä¸­ä½†æœ‰ç”¨çš„åªæœ‰ä¸€ç‚¹ã€‚

è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†éœ€è¦çš„æ•°æ®å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„åˆ‡ç‰‡ï¼Œç„¶åè¿”å›å®ƒï¼š

```go
func CopyDigits(filename string) []byte {
    b, _ := ioutil.ReadFile(filename)
    b = digitRegexp.Find(b)
    c := make([]byte, len(b))
    copy(c, b)
    return c
}
```

### å‚è€ƒ
åŸæ–‡[Go Slices: usage and internals](https://blog.golang.org/go-slices-usage-and-internals)
